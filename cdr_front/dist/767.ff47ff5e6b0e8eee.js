"use strict";(self.webpackChunkmantis_free_version=self.webpackChunkmantis_free_version||[]).push([[767],{7767:(F,s,n)=>{n.r(s),n.d(s,{default:()=>v});var a=n(177),e=n(3953),h=n(9437),l=n(8810),u=n(1626);let d=(()=>{class r{constructor(t){this.http=t,this.apiUrl="https://cdr.abacom.mx/api/sincronizar/"}uploadExcel(t){const o=new FormData;return o.append("file",t),this.http.post(this.apiUrl+"uploadExcel",o).pipe((0,h.W)(i=>(console.error("Error al subir el archivo:",i),i.error instanceof ErrorEvent?(0,l.$)(()=>new Error("Error en la subida del archivo. Intenta nuevamente.")):(0,l.$)(()=>new Error(`Error del servidor: ${i.status} ${i.statusText}`)))))}sincronizarZoho(){return this.http.post(this.apiUrl+"zoho",{})}static#e=this.\u0275fac=function(o){return new(o||r)(e.KVO(u.Qq))};static#t=this.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function p(r,m){if(1&r){const t=e.RV6();e.j41(0,"div",14),e.EFF(1),e.j41(2,"button",15),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.closeAlert())}),e.k0s()()}if(2&r){const t=e.XpG();e.ZvI("alert alert-",t.alertType," alert-dismissible fade show"),e.R7$(),e.SpI(" ",t.alertMessage," ")}}function f(r,m){if(1&r){const t=e.RV6();e.j41(0,"div",14),e.EFF(1),e.j41(2,"button",15),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.closeAlert())}),e.k0s()()}if(2&r){const t=e.XpG();e.ZvI("alert alert-",t.alertType," alert-dismissible fade show"),e.R7$(),e.SpI(" ",t.alertMessage," ")}}let v=(()=>{class r{constructor(t){this.sincronizarService=t,this.selectedFile=null,this.showAlert=!1,this.alertMessage="",this.alertType="danger"}onFileSelected(t){this.selectedFile=t.target.files[0],this.selectedFile?(this.showAlert=!1,console.log("Archivo seleccionado:",this.selectedFile.name)):(this.showAlert=!0,this.alertMessage="Por favor selecciona un archivo")}onUpload(){this.selectedFile?this.sincronizarService.uploadExcel(this.selectedFile).subscribe(t=>{this.alertMessage="Archivo subido con \xe9xito",this.alertType="success",this.showAlert=!0,this.hideAlertAfterTimeout(),console.log("Archivo subido con \xe9xito",t)},t=>{this.alertMessage="Error al subir el archivo",this.alertType="danger",this.showAlert=!0,console.error("Error al subir el archivo:",t)}):(this.alertMessage="Por favor selecciona un archivo",this.alertType="danger",this.showAlert=!0)}onSincronizar(){this.sincronizarService.sincronizarZoho().subscribe(t=>{console.log("Sincronizaci\xf3n con Zoho exitosa",t),this.alertMessage="Sincronizaci\xf3n con Zoho exitosa",this.alertType="success",this.showAlert=!0,this.hideAlertAfterTimeout()},t=>{console.error("Error al sincronizar con Zoho",t),this.alertMessage="Error al sincronizar con Zoho",this.alertType="danger",this.showAlert=!0})}hideAlertAfterTimeout(){setTimeout(()=>{this.showAlert=!1},3e3)}closeAlert(){this.showAlert=!1}static#e=this.\u0275fac=function(o){return new(o||r)(e.rXU(d))};static#t=this.\u0275cmp=e.VBU({type:r,selectors:[["app-sincronizar"]],standalone:!0,features:[e.aNF],decls:28,vars:2,consts:[[1,"auth-main"],[1,"auth-wrapper","v3"],[1,"auth-form"],[1,"card","my-5"],[1,"card-body"],[1,"mb-4"],["role","alert",3,"class",4,"ngIf"],[1,"mb-5"],[1,"form-group","mb-3"],["for","excelFile",1,"form-label"],[1,"input-group"],["type","file","id","excelFile",1,"form-control",3,"change"],[1,"btn","btn-primary",3,"click"],[1,"d-grid"],["role","alert"],["type","button","aria-label","Close",1,"btn-close",3,"click"]],template:function(o,i){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3",5)(6,"b"),e.EFF(7,"Sincronizaci\xf3n"),e.k0s()(),e.DNE(8,p,3,4,"div",6),e.j41(9,"div",7)(10,"h5")(11,"b"),e.EFF(12,"Importar archivo de Excel a MySQL"),e.k0s()(),e.j41(13,"div",8)(14,"label",9),e.EFF(15,"Campo del archivo"),e.k0s(),e.j41(16,"div",10)(17,"input",11),e.bIt("change",function(b){return i.onFileSelected(b)}),e.k0s(),e.j41(18,"button",12),e.bIt("click",function(){return i.onUpload()}),e.EFF(19,"Subir"),e.k0s()()()(),e.j41(20,"div",5)(21,"h5")(22,"b"),e.EFF(23,"Sincronizar datos con Zoho"),e.k0s()(),e.j41(24,"div",13)(25,"button",12),e.bIt("click",function(){return i.onSincronizar()}),e.EFF(26,"Sincronizar"),e.k0s()()(),e.DNE(27,f,3,4,"div",6),e.k0s()()()()()),2&o&&(e.R7$(8),e.Y8G("ngIf",i.showAlert),e.R7$(19),e.Y8G("ngIf",i.showAlert))},dependencies:[a.MD,a.bT]})}return r})()}}]);